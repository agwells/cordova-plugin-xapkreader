<?xml version="1.0" encoding="UTF-8"?>
<plugin xmlns="http://apache.org/cordova/ns/plugins/1.0" xmlns:android="http://schemas.android.com/apk/res/android" id="com.flyingsoftgames.xapkreader" version="0.9.0">
 <name>Cordova Expansion File Reader</name>
 <description>Easily access Google Play APK expansion file data.</description>
 <author>Michael Romanovsky</author>
 <license>MIT (see readme.md)</license>
 <keywords>cordova,apk,expansion,file,xapk,expansion file reader,xapk reader,xapkreader,android,agamemnus,flyingsoftgames</keywords>
 <engines><engine name="cordova" version=">=6.0.0" /></engines>
 
 <preference name="GOOGLE_PLAY_PUBLIC_KEY" default="YOUR_GOOGLE_PLAY_LICENSE_KEY" />
 <preference name="EXPANSION_AUTHORITY" default="$PACKAGE_NAME.expansion" />
 <preference name="MAIN_FILE_VERSION" default="0" />
 <preference name="PATCH_FILE_VERSION" default="0" />
 <preference name="MAIN_FILE_SIZE" default="0" />
 <preference name="PATCH_FILE_SIZE" default="0" />

 <platform name="android">
  <framework src="build.gradle" custom="true" type="gradleReference" />
  <config-file target="res/xml/config.xml" parent="/*">
   <feature name="XAPKReader">
    <param name="android-package" value="com.flyingsoftgames.xapkreader.XAPKReader"/>
    <param name="onload" value="true" />
   </feature>
   <allow-navigation href="content:*" />
  </config-file>
  
  <resource-file src="res/values/xapkreader.xml" target="res/values/xapkreader.xml" />
  <config-file target="res/values/xapkreader.xml" parent="/*">
   <string name="xapk_expansion_authority">$EXPANSION_AUTHORITY</string>
   <string name="xapk_google_play_public_key">$GOOGLE_PLAY_PUBLIC_KEY</string>
   <string name="xapk_text_downloading_assets">Downloading assets…</string>
   <string name="xapk_text_preparing_assets">Preparing assets…</string>
   <string name="xapk_text_download_failed">Download failed.</string>
   <string name="xapk_text_error">Error.</string>
   <string name="xapk_text_close">Close.</string>
   <integer name="xapk_main_version">$MAIN_FILE_VERSION</integer>
   <integer name="xapk_patch_version">$PATCH_FILE_VERSION</integer>
   <integer name="xapk_main_file_size">$MAIN_FILE_SIZE</integer>
   <integer name="xapk_patch_file_size">$PATCH_FILE_SIZE</integer>
  </config-file>
  
  <source-file src="src/android/XAPKAlarmReceiver.java"      target-dir="src/com/flyingsoftgames/xapkreader" />
  <source-file src="src/android/XAPKDownloaderActivity.java" target-dir="src/com/flyingsoftgames/xapkreader" />
  <source-file src="src/android/XAPKDownloaderService.java"  target-dir="src/com/flyingsoftgames/xapkreader" />
  <source-file src="src/android/XAPKExpansionSupport.java"   target-dir="src/com/flyingsoftgames/xapkreader" />
  <source-file src="src/android/XAPKProvider.java"           target-dir="src/com/flyingsoftgames/xapkreader" />
  <source-file src="src/android/XAPKReader.java"             target-dir="src/com/flyingsoftgames/xapkreader" />
  <source-file src="src/android/XAPKZipResourceFile.java"    target-dir="src/com/flyingsoftgames/xapkreader" />

  <config-file target="AndroidManifest.xml" parent="/manifest">
   <!-- Required to download files from Google Play -->
   <uses-permission android:name="android.permission.INTERNET" />
   <!-- Required to keep CPU alive while downloading files (NOT to keep screen awake) -->
   <uses-permission android:name="android.permission.WAKE_LOCK" />
   <!-- Required to poll the state of the network connection and respond to changes -->
   <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
   <!-- Required to check whether Wi-Fi is enabled -->
   <uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
   <!-- Required to read and write the expansion files on shared storage -->
   <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
   <!-- Required to access Google Play Licensing -->
   <uses-permission android:name="com.android.vending.CHECK_LICENSE" />
  </config-file>
  
  <config-file target="AndroidManifest.xml" parent="application">
   <activity android:name="com.flyingsoftgames.xapkreader.XAPKDownloaderActivity" android:label="@string/app_name" android:configChanges="orientation|keyboardHidden|keyboard|screenSize|locale">
   </activity>
   <service android:name="com.flyingsoftgames.xapkreader.XAPKDownloaderService" />
   <receiver android:name="com.flyingsoftgames.xapkreader.XAPKAlarmReceiver" />
   <provider android:authorities="$EXPANSION_AUTHORITY" android:exported="false" android:multiprocess="true" android:name="com.flyingsoftgames.xapkreader.XAPKProvider" />
  </config-file>
  
  <info> See the README.md file to complete your installation.</info>
  
 </platform>
</plugin>
